From: Jon Bernard <jbernard@debian.org>
Date: Sun, 27 Mar 2011 20:12:51 -0400
Subject: Add force-reload action to initscripts
To: libcg-devel@lists.sourceforge.net

This change is required for Debian compatibility. Here is the relevant
lintian information:

    The /etc/init.d scripts have to support the following command line
    arguments: start, stop, restart, force-reload.

    Refer to Debian Policy Manual section 9.3.2 (Writing the scripts)
    for details.

I'm not sure if other distributions require this, but it probably
doesn't hurt.
---
 scripts/init.d/cgconfig.in |    4 ++--
 scripts/init.d/cgred.in    |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/scripts/init.d/cgconfig.in b/scripts/init.d/cgconfig.in
index 8e0bad0..3459a42 100644
--- a/scripts/init.d/cgconfig.in
+++ b/scripts/init.d/cgconfig.in
@@ -146,7 +146,7 @@ trapped() {
 }
 
 usage() {
-    echo "$0 <start|stop|restart|condrestart|status>"
+    echo "$0 <start|stop|restart|condrestart|status|force-reload>"
     exit 2
 }
 
@@ -179,7 +179,7 @@ case $1 in
         start
         RETVAL=$?
         ;;
-    'restart'|'reload')
+    'restart'|'reload'|'force-reload')
 	restart
         RETVAL=$?
         ;;
diff --git a/scripts/init.d/cgred.in b/scripts/init.d/cgred.in
index 725d0b3..3677f2c 100644
--- a/scripts/init.d/cgred.in
+++ b/scripts/init.d/cgred.in
@@ -141,7 +141,7 @@ case "$1" in
 			RETVAL=$?
 		fi
 		;;
-	reload|flash)
+	reload|flash|force-reload)
 		if [ -f "$lockfile" ]; then
 			echo $"Reloading rules configuration..."
 			kill -s 12 `cat ${pidfile}`
@@ -156,7 +156,7 @@ case "$1" in
 		fi
 		;;
 	*)
-		echo $"Usage: $0 {start|stop|status|restart|condrestart|reload}"
+		echo $"Usage: $0 {start|stop|status|restart|condrestart|reload|force-reload}"
 		RETVAL=2
 		;;
 esac
-- 
